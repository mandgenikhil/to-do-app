{"ast":null,"code":"import _defineProperty from\"/home/nmandge/projetcs/to-do-app/to_do_app/to_do_app/templates/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/home/nmandge/projetcs/to-do-app/to_do_app/to_do_app/templates/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/nmandge/projetcs/to-do-app/to_do_app/to_do_app/templates/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/home/nmandge/projetcs/to-do-app/to_do_app/to_do_app/templates/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/home/nmandge/projetcs/to-do-app/to_do_app/to_do_app/templates/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _assertThisInitialized from\"/home/nmandge/projetcs/to-do-app/to_do_app/to_do_app/templates/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/home/nmandge/projetcs/to-do-app/to_do_app/to_do_app/templates/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from\"react\";import\"./index.scss\";import ToDoItem from\"./to-do-item\";import APIURLS from\"../../api-urls/to-do-api\";export var ToDo=/*#__PURE__*/function(_Component){_inherits(ToDo,_Component);function ToDo(props){var _this;_classCallCheck(this,ToDo);_this=_possibleConstructorReturn(this,_getPrototypeOf(ToDo).call(this,props));_this.clearAll=function(){localStorage.clear();_this.props.history.push(\"/\");};_this.handleChange=function(event){var _this$setState;_this.setState((_this$setState={},_defineProperty(_this$setState,event.target.name,event.target.value),_defineProperty(_this$setState,\"text_data\",event.target.value),_this$setState));};_this.state={toggleModal:false,todo_id:\"\",text_data:\"\",text_edit_data:\"\",responseList:[]};_this.handleModalDisplay=_this.handleModalDisplay.bind(_assertThisInitialized(_this));_this.onClickFunction=_this.onClickFunction.bind(_assertThisInitialized(_this));_this.handleModalDisplay=_this.handleModalDisplay.bind(_assertThisInitialized(_this));return _this;}_createClass(ToDo,[{key:\"handleModalDisplay\",value:function handleModalDisplay(todo_id,todo_data){this.setState(function(prev){return{toggleModal:!prev.toggleModal,todo_id:todo_id,text_edit_data:todo_data};});}},{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;if(localStorage.getItem(\"key\")===null){this.props.history.push(\"/\");localStorage.clear();}else{fetch(APIURLS.V1.gettodos,{method:\"GET\",mode:\"cors\",headers:{\"Content-Type\":\"application/json\",Authorization:\"Token \"+localStorage.getItem(\"key\")}}).then(function(response){return response.json();}).then(function(json){_this2.setState({key:json[\"key\"]});if(json[\"response\"]!==undefined){_this2.setState({responseList:json[\"response\"]});}else{_this2.setState({isError:true,errorMsg:\"Please enter valid credentials\"});}});}}},{key:\"onClearClickAction\",value:function onClearClickAction(){this.setState({text_data:\" \"});}},{key:\"editToDo\",value:function editToDo(todo_id){var _this3=this;var text_edit_data=document.getElementById(\"edit\").value;if(text_edit_data!==null&&text_edit_data.trim()!==\"\"){fetch(APIURLS.V1.edittodo,{method:\"POST\",mode:\"cors\",headers:{\"Content-Type\":\"application/json\",Authorization:\"Token \"+localStorage.getItem(\"key\")},body:JSON.stringify({todo_id:todo_id,todo_data:text_edit_data})}).then(function(response){return response.json();}).then(function(json){if(json[\"response\"]!==undefined){fetch(APIURLS.V1.gettodos,{method:\"GET\",mode:\"cors\",headers:{\"Content-Type\":\"application/json\",Authorization:\"Token \"+localStorage.getItem(\"key\")}}).then(function(response){return response.json();}).then(function(json){if(json[\"response\"]!==undefined){_this3.setState({responseList:json[\"response\"]});}else{_this3.setState({isError:true,errorMsg:\"Please enter valid credentials\"});}});}});this.setState(function(prev){return{toggleModal:!prev.toggleModal,todo_id:\"\"};});}}},{key:\"onEnterClickAction\",value:function onEnterClickAction(){var _this4=this;if(this.state.text_data!==\"\"){fetch(APIURLS.V1.savetodos,{method:\"POST\",mode:\"cors\",headers:{\"Content-Type\":\"application/json\",Authorization:\"Token \"+localStorage.getItem(\"key\")},body:JSON.stringify({todo_title:\"Test To Do\",todo_data:this.state.text_data})}).then(function(response){return response.json();}).then(function(json){if(json[\"response\"]!==undefined){fetch(APIURLS.V1.gettodos,{method:\"GET\",mode:\"cors\",headers:{\"Content-Type\":\"application/json\",Authorization:\"Token \"+localStorage.getItem(\"key\")}}).then(function(response){return response.json();}).then(function(json){if(json[\"response\"]!==undefined){_this4.setState({responseList:json[\"response\"]});}else{_this4.setState({isError:true,errorMsg:\"Please enter valid credentials\"});}});}});}else{alert(\"Please provide your inputs\");}}},{key:\"onClickFunction\",value:function onClickFunction(todo_id){var _this5=this;if(todo_id!==undefined){fetch(APIURLS.V1.deletetodo,{method:\"POST\",mode:\"cors\",headers:{\"Content-Type\":\"application/json\",Authorization:\"Token \"+localStorage.getItem(\"key\")},body:JSON.stringify({todo_id:todo_id})}).then(function(response){return response.json();}).then(function(json){if(json[\"response\"]!==undefined){fetch(APIURLS.V1.gettodos,{method:\"GET\",mode:\"cors\",headers:{\"Content-Type\":\"application/json\",Authorization:\"Token \"+localStorage.getItem(\"key\")}}).then(function(response){return response.json();}).then(function(json){if(json[\"response\"]!==undefined){_this5.setState({responseList:json[\"response\"]});}else{_this5.setState({isError:true,errorMsg:\"Please enter valid credentials\"});}});}});}}},{key:\"render\",value:function render(){var _this6=this;var ModalDescription=function ModalDescription(props){if(props.toggleModal===true){return React.createElement(\"div\",{class:\"modal is-active\"},React.createElement(\"div\",{class:\"modal-background\"}),React.createElement(\"div\",{class:\"modal-card\"},React.createElement(\"header\",{class:\"modal-card-head\"},\"Please edit your todo\"),React.createElement(\"section\",{class:\"modal-card-body\"},React.createElement(\"textarea\",{id:\"edit\",class:\"textarea\",placeholder:props.text_edit_data}),React.createElement(\"button\",{className:\"button info\",onClick:function onClick(){return _this6.editToDo(props.todo_id);}},\"Save\"),React.createElement(\"button\",{className:\"button info\",onClick:function onClick(){return _this6.handleModalDisplay();}},\"Cancel\"))));}else{return null;}};return React.createElement(\"div\",null,React.createElement(ModalDescription,{toggleModal:this.state.toggleModal,handleEditChange:this.handleEditChange,todo_id:this.state.todo_id,text_edit_data:this.state.text_edit_data}),React.createElement(\"header\",null,React.createElement(\"nav\",{class:\"navbar\",role:\"navigation\",\"aria-label\":\"main navigation\"},React.createElement(\"div\",{class:\"navbar-brand\"},React.createElement(\"a\",{class:\"navbar-item\",href:\"/ToDo\"},React.createElement(\"img\",{alt:\"\",src:\"https://img.icons8.com/fluent/48/000000/todo-list.png\"})),React.createElement(\"text\",{class:\"navbar-item\"},\"To-Do\")),React.createElement(\"div\",{id:\"navbarBasicExample\",class:\"navbar-menu\"},React.createElement(\"div\",{class:\"navbar-start\"})),React.createElement(\"div\",{class:\"navbar-end\"},React.createElement(\"div\",{class:\"navbar-item \"},React.createElement(\"a\",{href:true},\"Hi\",\" \",localStorage.getItem(\"user_name\")==null?\"User\":localStorage.getItem(\"user_name\").toUpperCase())),React.createElement(\"div\",{class:\"navbar-item\"},React.createElement(\"div\",{class:\"buttons\"},React.createElement(\"button\",{onClick:this.clearAll,class:\"button is-light\"},\"Log Out\")))))),React.createElement(\"div\",{id:\"div_1\",class:\"div_1\"},this.state.responseList.map(function(elementData){return React.createElement(ToDoItem,{todo:elementData,onClickFunction:_this6.onClickFunction,handleModalDisplay:_this6.handleModalDisplay});}),this.state.responseList.length===0?React.createElement(\"div\",{className:\"center is-size-1-touch\"},\"Your To-Do List Is Empty, Please add your To-Do's\"):null),React.createElement(\"div\",{id:\"div_2\",className:\"div_2\"},React.createElement(\"textarea\",{class:\"textarea\",placeholder:\"Please write your todo here\",onChange:this.handleChange}),React.createElement(\"div\",{class:\"level-right\"},React.createElement(\"span\",null,React.createElement(\"button\",{className:\"button info\",onClick:function onClick(){return _this6.onEnterClickAction();}},\"Save\")))));}}]);return ToDo;}(Component);export default ToDo;","map":{"version":3,"sources":["/home/nmandge/projetcs/to-do-app/to_do_app/to_do_app/templates/src/screens/todo/index.js"],"names":["React","Component","ToDoItem","APIURLS","ToDo","props","clearAll","localStorage","clear","history","push","handleChange","event","setState","target","name","value","state","toggleModal","todo_id","text_data","text_edit_data","responseList","handleModalDisplay","bind","onClickFunction","todo_data","prev","getItem","fetch","V1","gettodos","method","mode","headers","Authorization","then","response","json","key","undefined","isError","errorMsg","document","getElementById","trim","edittodo","body","JSON","stringify","savetodos","todo_title","alert","deletetodo","ModalDescription","editToDo","handleEditChange","toUpperCase","map","elementData","length","onEnterClickAction"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport \"./index.scss\";\nimport ToDoItem from \"./to-do-item\";\nimport APIURLS from \"../../api-urls/to-do-api\";\n\nexport class ToDo extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      toggleModal: false,\n      todo_id: \"\",\n      text_data: \"\",\n      text_edit_data: \"\",    \n      responseList: [],\n    };\n    this.handleModalDisplay = this.handleModalDisplay.bind(this);\n    this.onClickFunction = this.onClickFunction.bind(this);\n    this.handleModalDisplay = this.handleModalDisplay.bind(this);\n  }\n\n  handleModalDisplay(todo_id, todo_data) {\n    this.setState((prev) => {\n      return {\n        toggleModal: !prev.toggleModal,\n        todo_id: todo_id,\n        text_edit_data: todo_data,\n      };\n    });\n  }\n\n  componentDidMount() {\n    if (localStorage.getItem(\"key\") === null) {\n      this.props.history.push(\"/\");\n      localStorage.clear();\n    } else {\n      fetch(APIURLS.V1.gettodos, {\n        method: \"GET\",\n        mode: \"cors\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: \"Token \" + localStorage.getItem(\"key\"),\n        },\n      })\n        .then((response) => response.json())\n        .then((json) => {\n          this.setState({\n            key: json[\"key\"],\n          });\n          if (json[\"response\"] !== undefined) {\n            this.setState({\n              responseList: json[\"response\"],\n            });\n          } else {\n            this.setState({\n              isError: true,\n              errorMsg: \"Please enter valid credentials\",\n            });\n          }\n        });\n    }\n  }\n\n  clearAll = () => {\n    localStorage.clear();\n    this.props.history.push(\"/\");\n  };\n\n  handleChange = (event) => {\n    this.setState({\n      [event.target.name]: event.target.value,\n      text_data: event.target.value,\n    });\n  };\n\n  onClearClickAction() {\n    this.setState({\n      text_data: \" \",\n    });\n  }\n\n  editToDo(todo_id) {\n    var text_edit_data = document.getElementById(\"edit\").value;\n\n    if (text_edit_data !== null && text_edit_data.trim() !== \"\") {\n      fetch(APIURLS.V1.edittodo, {\n        method: \"POST\",\n        mode: \"cors\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: \"Token \" + localStorage.getItem(\"key\"),\n        },\n        body: JSON.stringify({\n          todo_id: todo_id,\n          todo_data: text_edit_data,\n        }),\n      })\n        .then((response) => response.json())\n        .then((json) => {\n          if (json[\"response\"] !== undefined) {\n            fetch(APIURLS.V1.gettodos, {\n              method: \"GET\",\n              mode: \"cors\",\n              headers: {\n                \"Content-Type\": \"application/json\",\n                Authorization: \"Token \" + localStorage.getItem(\"key\"),\n              },\n            })\n              .then((response) => response.json())\n              .then((json) => {               \n                if (json[\"response\"] !== undefined) {\n                  this.setState({\n                    responseList: json[\"response\"],\n                  });\n                } else {\n                  this.setState({\n                    isError: true,\n                    errorMsg: \"Please enter valid credentials\",\n                  });\n                }\n              });\n          }\n        });\n\n      this.setState((prev) => {\n        return { toggleModal: !prev.toggleModal, todo_id: \"\" };\n      });\n    }\n  }\n  onEnterClickAction() {\n    if (this.state.text_data !== \"\")\n    {\n      fetch(APIURLS.V1.savetodos, {\n        method: \"POST\",\n        mode: \"cors\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: \"Token \" + localStorage.getItem(\"key\"),\n        },\n        body: JSON.stringify({\n          todo_title: \"Test To Do\",\n          todo_data: this.state.text_data,\n        }),\n      })\n        .then((response) => response.json())\n        .then((json) => {\n          if (json[\"response\"] !== undefined) {\n            fetch(APIURLS.V1.gettodos, {\n              method: \"GET\",\n              mode: \"cors\",\n              headers: {\n                \"Content-Type\": \"application/json\",\n                Authorization: \"Token \" + localStorage.getItem(\"key\"),\n              },\n            })\n              .then((response) => response.json())\n              .then((json) => {             \n                if (json[\"response\"] !== undefined) {\n                  this.setState({\n                    responseList: json[\"response\"],\n                  });\n                } else {\n                  this.setState({\n                    isError: true,\n                    errorMsg: \"Please enter valid credentials\",\n                  });\n                }\n              });\n          }\n        });\n\n    }\n    else\n    {\n      alert(\"Please provide your inputs\");\n    }\n    \n  }\n  onClickFunction(todo_id) {\n    if (todo_id !== undefined) {\n      fetch(APIURLS.V1.deletetodo, {\n        method: \"POST\",\n        mode: \"cors\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: \"Token \" + localStorage.getItem(\"key\"),\n        },\n        body: JSON.stringify({\n          todo_id: todo_id,\n        }),\n      })\n        .then((response) => response.json())\n        .then((json) => {\n          if (json[\"response\"] !== undefined) {\n            fetch(APIURLS.V1.gettodos, {\n              method: \"GET\",\n              mode: \"cors\",\n              headers: {\n                \"Content-Type\": \"application/json\",\n                Authorization: \"Token \" + localStorage.getItem(\"key\"),\n              },\n            })\n              .then((response) => response.json())\n              .then((json) => {               \n                if (json[\"response\"] !== undefined) {\n                  this.setState({\n                    responseList: json[\"response\"],\n                  });\n                } else {\n                  this.setState({\n                    isError: true,\n                    errorMsg: \"Please enter valid credentials\",\n                  });\n                }\n              });\n          }\n        });\n    }\n  }\n\n  render() {\n    const ModalDescription = (props) => {\n      if (props.toggleModal === true) {\n        return (\n          <div class=\"modal is-active\">\n            <div class=\"modal-background\"></div>\n            <div class=\"modal-card\">\n              <header class=\"modal-card-head\">Please edit your todo</header>\n              <section class=\"modal-card-body\">\n                <textarea\n                  id=\"edit\"\n                  class=\"textarea\"\n                  placeholder={props.text_edit_data}\n                ></textarea>\n                <button\n                  className=\"button info\"\n                  onClick={() => this.editToDo(props.todo_id)}\n                >\n                  Save\n                </button>\n                <button\n                  className=\"button info\"\n                  onClick={() => this.handleModalDisplay()}\n                >\n                  Cancel\n                </button>\n              </section>\n            </div>\n          </div>\n        );\n      } else {\n        return null;\n      }\n    };\n    return (\n      <div>\n        <ModalDescription\n          toggleModal={this.state.toggleModal}\n          handleEditChange={this.handleEditChange}\n          todo_id={this.state.todo_id}\n          text_edit_data={this.state.text_edit_data}\n        />\n        <header>\n          <nav class=\"navbar\" role=\"navigation\" aria-label=\"main navigation\">\n            <div class=\"navbar-brand\">\n              <a class=\"navbar-item\" href=\"/ToDo\">\n                <img\n                  alt=\"\"\n                  src=\"https://img.icons8.com/fluent/48/000000/todo-list.png\"\n                />\n              </a>\n              <text class=\"navbar-item\">To-Do</text>\n            </div>\n\n            <div id=\"navbarBasicExample\" class=\"navbar-menu\">\n              <div class=\"navbar-start\"></div>\n            </div>\n\n            <div class=\"navbar-end\">\n              <div class=\"navbar-item \">\n                <a href>\n                  Hi{\" \"}\n                  {localStorage.getItem(\"user_name\") == null\n                    ? \"User\"\n                    : localStorage.getItem(\"user_name\").toUpperCase()}\n                </a>\n              </div>\n              <div class=\"navbar-item\">\n                <div class=\"buttons\">\n                  <button onClick={this.clearAll} class=\"button is-light\">\n                    Log Out\n                  </button>\n                </div>\n              </div>\n            </div>\n          </nav>\n        </header>\n\n        <div id = \"div_1\" class=\"div_1\">\n        \n          {this.state.responseList.map((elementData) => {\n            return (\n              <ToDoItem\n                todo={elementData}\n                onClickFunction={this.onClickFunction}\n                handleModalDisplay={this.handleModalDisplay}\n              />\n            );\n          })}\n          {this.state.responseList.length === 0 ? \n          <div className=\"center is-size-1-touch\">\n            Your To-Do List Is Empty, Please add your To-Do's\n\n            </div>\n            : null\n          }\n           \n          </div>\n       \n          <div id = \"div_2\" className=\"div_2\">\n            <textarea\n              class=\"textarea\"\n              placeholder=\"Please write your todo here\"\n              onChange={this.handleChange}\n            ></textarea>\n              <div class=\"level-right\">\n            <span>\n              <button\n                className=\"button info\"\n                onClick={() => this.onEnterClickAction()}\n              >\n                Save\n              </button>\n            </span>\n          </div>\n          </div>\n        \n       \n      </div>\n    );\n  }\n}\n\nexport default ToDo;\n"]},"metadata":{},"sourceType":"module"}