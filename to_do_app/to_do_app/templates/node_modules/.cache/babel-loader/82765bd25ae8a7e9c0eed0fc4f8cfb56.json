{"ast":null,"code":"var _jsxFileName = \"/home/nmandge/projetcs/to-do-app/to_do_app/to_do_app/templates/src/screens/todo/index.js\";\nimport React, { Component } from \"react\";\nimport \"./index.scss\";\nimport ToDoItem from \"./to-do-item\";\nimport APIURLS from \"../../api-urls/to-do-api\";\nexport class ToDo extends Component {\n  constructor(props) {\n    super(props);\n\n    this.clearAll = () => {\n      localStorage.clear();\n      this.props.history.push(\"/\");\n    };\n\n    this.handleChange = event => {\n      this.setState({\n        [event.target.name]: event.target.value,\n        text_data: event.target.value\n      });\n    };\n\n    this.handleEditChange = event => {\n      console.log(\"yo \", event.target.value);\n      this.setState({\n        [event.target.name]: event.target.value,\n        text_edit_data: event.target.value\n      });\n    };\n\n    this.clearData = () => {\n      this.setState({\n        text_data: \" \",\n        answer: \"\",\n        responseList: []\n      });\n    };\n\n    this.state = {\n      toggleModal: false,\n      todo_id: \"\",\n      text_data: \"\",\n      text_edit_data: \"\",\n      answer: \"\",\n      responseList: []\n    };\n    this.handleModalDisplay = this.handleModalDisplay.bind(this);\n    this.onClickFunction = this.onClickFunction.bind(this);\n    this.handleModalDisplay = this.handleModalDisplay.bind(this);\n  }\n\n  handleModalDisplay(todo_id) {\n    this.setState(prev => {\n      return {\n        toggleModal: !prev.toggleModal,\n        todo_id: todo_id\n      };\n    });\n  }\n\n  componentDidMount() {\n    if (localStorage.getItem(\"key\") === null) {\n      this.props.history.push(\"/\");\n      localStorage.clear();\n    } else {\n      fetch(APIURLS.V1.gettodos, {\n        method: \"GET\",\n        mode: \"cors\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: \"Token \" + localStorage.getItem(\"key\")\n        }\n      }).then(response => response.json()).then(json => {\n        this.setState({\n          key: json[\"key\"]\n        });\n\n        if (json[\"response\"] !== undefined) {\n          this.setState({\n            responseList: json[\"response\"]\n          });\n        } else {\n          this.setState({\n            isError: true,\n            errorMsg: \"Please enter valid credentials\"\n          });\n        }\n      });\n    }\n  }\n\n  onClearClickAction() {\n    this.setState({\n      text_data: \" \"\n    });\n  }\n\n  editToDo(todo_id) {\n    console.log(\"data = \", todo_id, this.state);\n    fetch(APIURLS.V1.edittodo, {\n      method: \"POST\",\n      mode: \"cors\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: \"Token \" + localStorage.getItem(\"key\")\n      },\n      body: JSON.stringify({\n        todo_id: todo_id,\n        todo_data: this.state.text_data_edit\n      })\n    }).then(response => response.json()).then(json => {\n      if (json[\"response\"] !== undefined) {\n        fetch(APIURLS.V1.gettodos, {\n          method: \"GET\",\n          mode: \"cors\",\n          headers: {\n            \"Content-Type\": \"application/json\",\n            Authorization: \"Token \" + localStorage.getItem(\"key\")\n          }\n        }).then(response => response.json()).then(json => {\n          this.setState({\n            key: json[\"key\"]\n          });\n\n          if (json[\"response\"] !== undefined) {\n            this.setState({\n              responseList: json[\"response\"]\n            });\n          } else {\n            this.setState({\n              isError: true,\n              errorMsg: \"Please enter valid credentials\"\n            });\n          }\n        });\n      }\n    });\n  }\n\n  onEnterClickAction() {\n    fetch(APIURLS.V1.savetodos, {\n      method: \"POST\",\n      mode: \"cors\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: \"Token \" + localStorage.getItem(\"key\")\n      },\n      body: JSON.stringify({\n        todo_title: \"Test To Do\",\n        todo_data: this.state.text_data\n      })\n    }).then(response => response.json()).then(json => {\n      if (json[\"response\"] !== undefined) {\n        fetch(APIURLS.V1.gettodos, {\n          method: \"GET\",\n          mode: \"cors\",\n          headers: {\n            \"Content-Type\": \"application/json\",\n            Authorization: \"Token \" + localStorage.getItem(\"key\")\n          }\n        }).then(response => response.json()).then(json => {\n          this.setState({\n            key: json[\"key\"]\n          });\n\n          if (json[\"response\"] !== undefined) {\n            this.setState({\n              responseList: json[\"response\"]\n            });\n          } else {\n            this.setState({\n              isError: true,\n              errorMsg: \"Please enter valid credentials\"\n            });\n          }\n        });\n      }\n    });\n  }\n\n  onClickFunction(todo_id) {\n    if (todo_id !== undefined) {\n      fetch(APIURLS.V1.deletetodo, {\n        method: \"POST\",\n        mode: \"cors\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: \"Token \" + localStorage.getItem(\"key\")\n        },\n        body: JSON.stringify({\n          todo_id: todo_id\n        })\n      }).then(response => response.json()).then(json => {\n        if (json[\"response\"] !== undefined) {\n          console.log(\"Mandge\", json);\n          fetch(APIURLS.V1.gettodos, {\n            method: \"GET\",\n            mode: \"cors\",\n            headers: {\n              \"Content-Type\": \"application/json\",\n              Authorization: \"Token \" + localStorage.getItem(\"key\")\n            }\n          }).then(response => response.json()).then(json => {\n            this.setState({\n              key: json[\"key\"]\n            });\n\n            if (json[\"response\"] !== undefined) {\n              this.setState({\n                responseList: json[\"response\"]\n              });\n            } else {\n              this.setState({\n                isError: true,\n                errorMsg: \"Please enter valid credentials\"\n              });\n            }\n          });\n        }\n      });\n    }\n  }\n\n  render() {\n    const ModalDescription = props => {\n      console.log(\"yo\", props.toggleModal);\n\n      if (props.toggleModal === true) {\n        return React.createElement(\"div\", {\n          class: \"modal is-active\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 236\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          class: \"modal-background\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 237\n          },\n          __self: this\n        }), React.createElement(\"div\", {\n          class: \"modal-card\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 238\n          },\n          __self: this\n        }, React.createElement(\"header\", {\n          class: \"modal-card-head\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 239\n          },\n          __self: this\n        }, \"Please edit your todo\"), React.createElement(\"section\", {\n          class: \"modal-card-body\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 242\n          },\n          __self: this\n        }, React.createElement(\"textarea\", {\n          class: \"textarea\",\n          placeholder: \"Please write your todo here\",\n          onSubmit: props.handleEditChange,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 243\n          },\n          __self: this\n        }), React.createElement(\"button\", {\n          className: \"button info\",\n          onClick: () => this.editToDo(props.todo_id),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 248\n          },\n          __self: this\n        }, \"Save\"), React.createElement(\"button\", {\n          className: \"button info\",\n          onClick: () => this.handleModalDisplay(),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 254\n          },\n          __self: this\n        }, \"Cancel\"))));\n      } else {\n        return null;\n      }\n    };\n\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 269\n      },\n      __self: this\n    }, React.createElement(ModalDescription, {\n      toggleModal: this.state.toggleModal,\n      handleEditChange: this.handleEditChange,\n      todo_id: this.state.todo_id,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 270\n      },\n      __self: this\n    }), React.createElement(\"header\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 271\n      },\n      __self: this\n    }, React.createElement(\"nav\", {\n      class: \"navbar\",\n      role: \"navigation\",\n      \"aria-label\": \"main navigation\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 272\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      class: \"navbar-brand\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 273\n      },\n      __self: this\n    }, React.createElement(\"a\", {\n      class: \"navbar-item\",\n      href: \"/ToDo\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 274\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      alt: \"\",\n      src: \"https://img.icons8.com/fluent/48/000000/todo-list.png\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 275\n      },\n      __self: this\n    })), React.createElement(\"text\", {\n      class: \"navbar-item\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 280\n      },\n      __self: this\n    }, \"To-Do\")), React.createElement(\"div\", {\n      id: \"navbarBasicExample\",\n      class: \"navbar-menu\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 283\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      class: \"navbar-start\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 284\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      class: \"navbar-end\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 287\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      class: \"navbar-item \",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 288\n      },\n      __self: this\n    }, React.createElement(\"a\", {\n      href: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 289\n      },\n      __self: this\n    }, \"Hi\", \" \", localStorage.getItem(\"user_name\") == null ? \"User\" : localStorage.getItem(\"user_name\").toUpperCase())), React.createElement(\"div\", {\n      class: \"navbar-item\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 296\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      class: \"buttons\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 297\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      onClick: this.clearAll,\n      class: \"button is-light\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 298\n      },\n      __self: this\n    }, \"Log Out\")))))), React.createElement(\"article\", {\n      class: \"box\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 307\n      },\n      __self: this\n    }, this.state.responseList.map(elementData => {\n      return React.createElement(ToDoItem, {\n        todo: elementData,\n        onClickFunction: this.onClickFunction,\n        handleModalDisplay: this.handleModalDisplay,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 310\n        },\n        __self: this\n      });\n    }), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 317\n      },\n      __self: this\n    }, React.createElement(\"textarea\", {\n      class: \"textarea\",\n      placeholder: \"Please write your todo here\",\n      onChange: this.handleChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 318\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      class: \"level-right\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 324\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 325\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      className: \"button info\",\n      onClick: () => this.onEnterClickAction(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 326\n      },\n      __self: this\n    }, \"Save\")))));\n  }\n\n}\nexport default ToDo;","map":{"version":3,"sources":["/home/nmandge/projetcs/to-do-app/to_do_app/to_do_app/templates/src/screens/todo/index.js"],"names":["React","Component","ToDoItem","APIURLS","ToDo","constructor","props","clearAll","localStorage","clear","history","push","handleChange","event","setState","target","name","value","text_data","handleEditChange","console","log","text_edit_data","clearData","answer","responseList","state","toggleModal","todo_id","handleModalDisplay","bind","onClickFunction","prev","componentDidMount","getItem","fetch","V1","gettodos","method","mode","headers","Authorization","then","response","json","key","undefined","isError","errorMsg","onClearClickAction","editToDo","edittodo","body","JSON","stringify","todo_data","text_data_edit","onEnterClickAction","savetodos","todo_title","deletetodo","render","ModalDescription","toUpperCase","map","elementData"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport \"./index.scss\";\nimport ToDoItem from \"./to-do-item\";\nimport APIURLS from \"../../api-urls/to-do-api\";\n\nexport class ToDo extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      toggleModal: false,\n      todo_id: \"\",\n      text_data: \"\",\n      text_edit_data:\"\",\n      answer: \"\",\n      responseList: [],\n    };\n    this.handleModalDisplay = this.handleModalDisplay.bind(this);\n    this.onClickFunction = this.onClickFunction.bind(this);\n    this.handleModalDisplay = this.handleModalDisplay.bind(this);\n  }\n\n  handleModalDisplay(todo_id) {    \n    this.setState((prev) => {\n      return { toggleModal: !prev.toggleModal, todo_id: todo_id };\n    });\n  }\n\n  componentDidMount() {\n    if (localStorage.getItem(\"key\") === null) {\n      this.props.history.push(\"/\");\n      localStorage.clear();\n    } else {\n      fetch(APIURLS.V1.gettodos, {\n        method: \"GET\",\n        mode: \"cors\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: \"Token \" + localStorage.getItem(\"key\"),\n        },\n      })\n        .then((response) => response.json())\n        .then((json) => {\n          this.setState({\n            key: json[\"key\"],\n          });\n          if (json[\"response\"] !== undefined) {\n            this.setState({\n              responseList: json[\"response\"],\n            });\n          } else {\n            this.setState({\n              isError: true,\n              errorMsg: \"Please enter valid credentials\",\n            });\n          }\n        });\n    }\n  }\n\n  clearAll = () => {\n    localStorage.clear();\n    this.props.history.push(\"/\");\n  };\n\n  handleChange = (event) => {\n    \n    \n    this.setState({\n      [event.target.name]: event.target.value,\n      text_data: event.target.value,\n    });\n  };\n\n  handleEditChange = (event) => {\n    console.log(\"yo \",event.target.value)\n    this.setState({\n      [event.target.name]: event.target.value,\n      text_edit_data: event.target.value,\n    });\n  };\n\n  clearData = () => {\n    this.setState({\n      text_data: \" \",\n      answer: \"\",\n      responseList: [],\n    });\n  };\n\n  onClearClickAction() {\n    this.setState({\n      text_data: \" \",\n    });\n  }\n\n\n  editToDo(todo_id) {\n\n    console.log(\"data = \",todo_id,this.state)\n    fetch(APIURLS.V1.edittodo, {\n      method: \"POST\",\n      mode: \"cors\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: \"Token \" + localStorage.getItem(\"key\"),\n      },\n      body: JSON.stringify({\n        todo_id: todo_id,\n        todo_data: this.state.text_data_edit,\n      }),\n    })\n      .then((response) => response.json())\n      .then((json) => {\n        if (json[\"response\"] !== undefined) {\n          fetch(APIURLS.V1.gettodos, {\n            method: \"GET\",\n            mode: \"cors\",\n            headers: {\n              \"Content-Type\": \"application/json\",\n              Authorization: \"Token \" + localStorage.getItem(\"key\"),\n            },\n          })\n            .then((response) => response.json())\n            .then((json) => {\n              this.setState({\n                key: json[\"key\"],\n              });\n              if (json[\"response\"] !== undefined) {\n                this.setState({\n                  responseList: json[\"response\"],\n                });\n              } else {\n                this.setState({\n                  isError: true,\n                  errorMsg: \"Please enter valid credentials\",\n                });\n              }\n            });\n        }\n      });\n  }\n  onEnterClickAction() {\n    fetch(APIURLS.V1.savetodos, {\n      method: \"POST\",\n      mode: \"cors\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: \"Token \" + localStorage.getItem(\"key\"),\n      },\n      body: JSON.stringify({\n        todo_title: \"Test To Do\",\n        todo_data: this.state.text_data,\n      }),\n    })\n      .then((response) => response.json())\n      .then((json) => {\n        if (json[\"response\"] !== undefined) {\n          fetch(APIURLS.V1.gettodos, {\n            method: \"GET\",\n            mode: \"cors\",\n            headers: {\n              \"Content-Type\": \"application/json\",\n              Authorization: \"Token \" + localStorage.getItem(\"key\"),\n            },\n          })\n            .then((response) => response.json())\n            .then((json) => {\n              this.setState({\n                key: json[\"key\"],\n              });\n              if (json[\"response\"] !== undefined) {\n                this.setState({\n                  responseList: json[\"response\"],\n                });\n              } else {\n                this.setState({\n                  isError: true,\n                  errorMsg: \"Please enter valid credentials\",\n                });\n              }\n            });\n        }\n      });\n  }\n  onClickFunction(todo_id) {\n    if (todo_id !== undefined) {\n      fetch(APIURLS.V1.deletetodo, {\n        method: \"POST\",\n        mode: \"cors\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: \"Token \" + localStorage.getItem(\"key\"),\n        },\n        body: JSON.stringify({\n          todo_id: todo_id,\n        }),\n      })\n        .then((response) => response.json())\n        .then((json) => {\n          if (json[\"response\"] !== undefined) {\n            console.log(\"Mandge\", json);\n            fetch(APIURLS.V1.gettodos, {\n              method: \"GET\",\n              mode: \"cors\",\n              headers: {\n                \"Content-Type\": \"application/json\",\n                Authorization: \"Token \" + localStorage.getItem(\"key\"),\n              },\n            })\n              .then((response) => response.json())\n              .then((json) => {\n                this.setState({\n                  key: json[\"key\"],\n                });\n                if (json[\"response\"] !== undefined) {\n                  this.setState({\n                    responseList: json[\"response\"],\n                  });\n                } else {\n                  this.setState({\n                    isError: true,\n                    errorMsg: \"Please enter valid credentials\",\n                  });\n                }\n              });\n          }\n        });\n    }\n  }\n\n  render() {\n    const ModalDescription = (props) => {\n      console.log(\"yo\",props.toggleModal)\n      if (props.toggleModal === true) {\n        return (\n          <div class=\"modal is-active\">\n            <div class=\"modal-background\"></div>\n            <div class=\"modal-card\">\n              <header class=\"modal-card-head\">                \n                Please edit your todo               \n              </header>\n              <section class=\"modal-card-body\">\n              <textarea\n              class=\"textarea\"\n              placeholder=\"Please write your todo here\"\n              onSubmit ={props.handleEditChange}\n            ></textarea>\n              <button\n                className=\"button info\"\n                onClick={() => this.editToDo(props.todo_id)}\n              >\n                Save\n              </button>\n              <button\n                className=\"button info\"\n                onClick={() => this.handleModalDisplay()}\n              >\n                Cancel\n              </button>\n              </section>             \n            </div>\n          </div>\n        );\n      } else {\n        return null;\n      }\n    };\n    return (\n      <div>\n        <ModalDescription toggleModal={this.state.toggleModal} handleEditChange = {this.handleEditChange} todo_id = {this.state.todo_id} />\n        <header>\n          <nav class=\"navbar\" role=\"navigation\" aria-label=\"main navigation\">\n            <div class=\"navbar-brand\">\n              <a class=\"navbar-item\" href=\"/ToDo\">\n                <img\n                  alt=\"\"\n                  src=\"https://img.icons8.com/fluent/48/000000/todo-list.png\"\n                />\n              </a>\n              <text class=\"navbar-item\">To-Do</text>\n            </div>\n\n            <div id=\"navbarBasicExample\" class=\"navbar-menu\">\n              <div class=\"navbar-start\"></div>\n            </div>\n\n            <div class=\"navbar-end\">\n              <div class=\"navbar-item \">\n                <a href>\n                  Hi{\" \"}\n                  {localStorage.getItem(\"user_name\") == null\n                    ? \"User\"\n                    : localStorage.getItem(\"user_name\").toUpperCase()}\n                </a>\n              </div>\n              <div class=\"navbar-item\">\n                <div class=\"buttons\">\n                  <button onClick={this.clearAll} class=\"button is-light\">\n                    Log Out\n                  </button>\n                </div>\n              </div>\n            </div>\n          </nav>\n        </header>\n\n        <article class=\"box\">\n          {this.state.responseList.map((elementData) => {\n            return (\n              <ToDoItem\n                todo={elementData}\n                onClickFunction={this.onClickFunction}\n                handleModalDisplay={this.handleModalDisplay}\n              />\n            );\n          })}\n          <div>\n            <textarea\n              class=\"textarea\"\n              placeholder=\"Please write your todo here\"\n              onChange={this.handleChange}\n            ></textarea>\n          </div>\n          <div class=\"level-right\">\n            <span>\n              <button\n                className=\"button info\"\n                onClick={() => this.onEnterClickAction()}\n              >\n                Save\n              </button>\n            </span>\n          </div>\n        </article>\n      </div>\n    );\n  }\n}\n\nexport default ToDo;\n"]},"metadata":{},"sourceType":"module"}